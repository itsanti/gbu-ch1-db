# Урок 7. Видеоурок «Хранимые процедуры и функции, триггеры. Оптимизация запросов. NoSQL»
## Практическое задание тема №8
1. Создайте хранимую функцию `hello()`, которая будет возвращать приветствие, в зависимости от текущего времени суток. С `6:00` до `12:00` функция должна возвращать фразу `"Доброе утро"`, с `12:00` до `18:00` функция должна возвращать фразу `"Добрый день"`, с `18:00` до `00:00` — `"Добрый вечер"`, с `00:00` до `6:00` — `"Доброй ночи"`

> solution file: [t8ex1_hello.sql](topic8/t8ex1_hello.sql)

2. В таблице `products` есть два текстовых поля: `name` с названием товара и `description` с его описанием. Допустимо присутствие обоих полей или одно из них. Ситуация, когда оба поля принимают неопределенное значение `NULL` неприемлема. Используя триггеры, добейтесь того, чтобы одно из этих полей или оба поля были заполнены. При попытке присвоить полям `NULL`-значение необходимо отменить операцию.

> solution file: [t8ex2_trigger.sql](topic8/t8ex2_trigger.sql)

3. (по желанию) Напишите хранимую функцию для вычисления произвольного числа Фибоначчи. Числами Фибоначчи называется последовательность в которой число равно сумме двух предыдущих чисел. Вызов функции `FIBONACCI(10)` должен возвращать число `55`.

![alt text](ex8.3.png)

> solution file: [t8ex3_fibonacci.sql](topic8/t8ex3_fibonacci.sql)

## Практическое задание тема №9
1. Создайте таблицу `logs` типа `Archive`. Пусть при каждом создании записи в таблицах `users`, `catalogs` и `products` в таблицу `logs` помещается **время** и **дата** создания записи, **название** таблицы, **идентификатор первичного ключа** и содержимое поля **name**.

> solution file: [t9ex1_archive.sql](topic9/t9ex1_archive.sql)

2. (по желанию) Создайте SQL-запрос, который помещает в таблицу `users` миллион записей.


## Практическое задание тема №10
1. В базе данных `Redis` подберите коллекцию для подсчета посещений с определенных IP-адресов.

> solution file: [t10ex1_redis.sh](topic10/t10ex1_redis.sh)

2. При помощи базы данных `Redis` решите задачу поиска имени пользователя по электронному адресу и наоборот, поиск электронного адреса пользователя по его имени.

> solution file: [t10ex2_redis.sh](topic10/t10ex2_redis.sh)

3. Организуйте хранение категорий и товарных позиций учебной базы данных `shop` в СУБД `MongoDB`.

> solution file: [t10ex3_mongodb.js](topic10/t10ex3_mongodb.js)